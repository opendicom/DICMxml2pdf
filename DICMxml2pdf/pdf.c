//  Created by jacquesfauquex on 2025-02-08.
#include "pdf.h"
#include <string.h>//for memcpy() strlen()
#include <stdio.h>//sprintf()
//https://brendanzagaeski.appspot.com/0004.html
const char ningundocumentopdf[746] = {
   0x0A,0x25,0x50,0x44 ,0x46,0x2D,0x31,0x2E ,0x31,0x0A,0x25,0xA5 ,0xB1,0xEB,0x0A,0x0A ,
   0x31,0x20,0x30,0x20 ,0x6F,0x62,0x6A,0x0A ,0x20,0x20,0x3C,0x3C ,0x20,0x2F,0x54,0x79 ,
   0x70,0x65,0x20,0x2F ,0x43,0x61,0x74,0x61 ,0x6C,0x6F,0x67,0x0A ,0x20,0x20,0x20,0x20 ,
   0x20,0x2F,0x50,0x61 ,0x67,0x65,0x73,0x20 ,0x32,0x20,0x30,0x20 ,0x52,0x0A,0x20,0x20 ,
   0x3E,0x3E,0x0A,0x65 ,0x6E,0x64,0x6F,0x62 ,0x6A,0x0A,0x0A,0x32 ,0x20,0x30,0x20,0x6F ,
   0x62,0x6A,0x0A,0x20 ,0x20,0x3C,0x3C,0x20 ,0x2F,0x54,0x79,0x70 ,0x65,0x20,0x2F,0x50 ,
   0x61,0x67,0x65,0x73 ,0x0A,0x20,0x20,0x20 ,0x20,0x20,0x2F,0x4B ,0x69,0x64,0x73,0x20 ,
   0x5B,0x33,0x20,0x30 ,0x20,0x52,0x5D,0x0A ,0x20,0x20,0x20,0x20 ,0x20,0x2F,0x43,0x6F ,
   0x75,0x6E,0x74,0x20 ,0x31,0x0A,0x20,0x20 ,0x20,0x20,0x20,0x2F ,0x4D,0x65,0x64,0x69 ,
   0x61,0x42,0x6F,0x78 ,0x20,0x5B,0x30,0x20 ,0x30,0x20, '1', '8' , '5',0x20, '3', '0' ,
   0x5D,0x0A,0x20,0x20 ,0x3E,0x3E,0x0A,0x65 ,0x6E,0x64,0x6F,0x62 ,0x6A,0x0A,0x0A,0x33 ,
   0x20,0x30,0x20,0x6F ,0x62,0x6A,0x0A,0x20 ,0x20,0x3C,0x3C,0x20 ,0x20,0x2F,0x54,0x79 ,
   0x70,0x65,0x20,0x2F ,0x50,0x61,0x67,0x65 ,0x0A,0x20,0x20,0x20 ,0x20,0x20,0x20,0x2F ,
   0x50,0x61,0x72,0x65 ,0x6E,0x74,0x20,0x32 ,0x20,0x30,0x20,0x52 ,0x0A,0x20,0x20,0x20 ,
   0x20,0x20,0x20,0x2F ,0x52,0x65,0x73,0x6F ,0x75,0x72,0x63,0x65 ,0x73,0x0A,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x3C,0x3C,0x20 ,0x2F,0x46,0x6F,0x6E ,0x74,0x0A,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x3C,0x3C,0x20 ,0x2F,0x46,0x31,0x0A ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x3C ,
   0x3C,0x20,0x2F,0x54 ,0x79,0x70,0x65,0x20 ,0x2F,0x46,0x6F,0x6E ,0x74,0x0A,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,
   0x2F,0x53,0x75,0x62 ,0x74,0x79,0x70,0x65 ,0x20,0x2F,0x54,0x79 ,0x70,0x65,0x31,0x0A ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,
   0x20,0x20,0x2F,0x42 ,0x61,0x73,0x65,0x46 ,0x6F,0x6E,0x74,0x20 ,0x2F,0x54,0x69,0x6D ,
   0x65,0x73,0x2D,0x52 ,0x6F,0x6D,0x61,0x6E ,0x0A,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x3E,0x3E,0x0A,0x20 ,0x20,0x20,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x3E,0x3E ,0x0A,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,
   0x3E,0x3E,0x0A,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x2F,0x43,0x6F ,0x6E,0x74,0x65,0x6E ,
   0x74,0x73,0x20,0x34 ,0x20,0x30,0x20,0x52 ,0x0A,0x20,0x20,0x3E ,0x3E,0x0A,0x65,0x6E ,
   0x64,0x6F,0x62,0x6A ,0x0A,0x0A,0x34,0x20 ,0x30,0x20,0x6F,0x62 ,0x6A,0x0A,0x20,0x20 ,
   0x3C,0x3C,0x20,0x2F ,0x4C,0x65,0x6E,0x67 ,0x74,0x68,0x20,0x35 ,0x35,0x20,0x3E,0x3E ,
   0x0A,0x73,0x74,0x72 ,0x65,0x61,0x6D,0x0A ,0x20,0x20,0x42,0x54 ,0x0A,0x20,0x20,0x20 ,
   0x20,0x2F,0x46,0x31 ,0x20,0x31,0x38,0x20 ,0x54,0x66,0x0A,0x20 ,0x20,0x20,0x20, '1' ,
    '0',0x20, '1', '0' ,0x20,0x54,0x64,0x0A ,0x20,0x20,0x20,0x20 ,0x28, 'n', 'i', 'n' ,
    'g', 'u', 'n',0x20 , 'd', 'o', 'c', 'u' , 'm', 'e', 'n', 't' , 'o',0x20, 'p', 'd' ,
    'f',0x29,0x20,0x54 ,0x6A,0x0A,0x20,0x20 ,0x45,0x54,0x0A,0x65 ,0x6E,0x64,0x73,0x74 ,
   0x72,0x65,0x61,0x6D ,0x0A,0x65,0x6E,0x64 ,0x6F,0x62,0x6A,0x0A ,0x0A,0x78,0x72,0x65 ,
   0x66,0x0A,0x30,0x20 ,0x35,0x0A,0x30,0x30 ,0x30,0x30,0x30,0x30 ,0x30,0x30,0x30,0x30 ,
   0x20,0x36,0x35,0x35 ,0x33,0x35,0x20,0x66 ,0x20,0x0A,0x30,0x30 ,0x30,0x30,0x30,0x30 ,
   0x30,0x30,0x31,0x38 ,0x20,0x30,0x30,0x30 ,0x30,0x30,0x20,0x6E ,0x20,0x0A,0x30,0x30 ,
   0x30,0x30,0x30,0x30 ,0x30,0x30,0x37,0x37 ,0x20,0x30,0x30,0x30 ,0x30,0x30,0x20,0x6E ,
   0x20,0x0A,0x30,0x30 ,0x30,0x30,0x30,0x30 ,0x30,0x31,0x37,0x38 ,0x20,0x30,0x30,0x30 ,
   0x30,0x30,0x20,0x6E ,0x20,0x0A,0x30,0x30 ,0x30,0x30,0x30,0x30 ,0x30,0x34,0x35,0x37 ,
   0x20,0x30,0x30,0x30 ,0x30,0x30,0x20,0x6E ,0x20,0x0A,0x74,0x72 ,0x61,0x69,0x6C,0x65 ,
   0x72,0x0A,0x20,0x20 ,0x3C,0x3C,0x20,0x20 ,0x2F,0x52,0x6F,0x6F ,0x74,0x20,0x31,0x20 ,
   0x30,0x20,0x52,0x0A ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x2F,0x53 ,0x69,0x7A,0x65,0x20 ,
   0x35,0x0A,0x20,0x20 ,0x3E,0x3E,0x0A,0x73 ,0x74,0x61,0x72,0x74 ,0x78,0x72,0x65,0x66 ,
   0x0A,0x35,0x36,0x35 ,0x0A,0x25,0x25,0x45 ,0x4F,0x46
};//twidth, height, text



const char width3char[154] = {
   0x0A,0x25,0x50,0x44 ,0x46,0x2D,0x31,0x2E ,0x31,0x0A,0x25,0xA5 ,0xB1,0xEB,0x0A,0x0A ,
   0x31,0x20,0x30,0x20 ,0x6F,0x62,0x6A,0x0A ,0x20,0x20,0x3C,0x3C ,0x20,0x2F,0x54,0x79 ,
   0x70,0x65,0x20,0x2F ,0x43,0x61,0x74,0x61 ,0x6C,0x6F,0x67,0x0A ,0x20,0x20,0x20,0x20 ,
   0x20,0x2F,0x50,0x61 ,0x67,0x65,0x73,0x20 ,0x32,0x20,0x30,0x20 ,0x52,0x0A,0x20,0x20 ,
   0x3E,0x3E,0x0A,0x65 ,0x6E,0x64,0x6F,0x62 ,0x6A,0x0A,0x0A,0x32 ,0x20,0x30,0x20,0x6F ,
   0x62,0x6A,0x0A,0x20 ,0x20,0x3C,0x3C,0x20 ,0x2F,0x54,0x79,0x70 ,0x65,0x20,0x2F,0x50 ,
   0x61,0x67,0x65,0x73 ,0x0A,0x20,0x20,0x20 ,0x20,0x20,0x2F,0x4B ,0x69,0x64,0x73,0x20 ,
   0x5B,0x33,0x20,0x30 ,0x20,0x52,0x5D,0x0A ,0x20,0x20,0x20,0x20 ,0x20,0x2F,0x43,0x6F ,
   0x75,0x6E,0x74,0x20 ,0x31,0x0A,0x20,0x20 ,0x20,0x20,0x20,0x2F ,0x4D,0x65,0x64,0x69 ,
   0x61,0x42,0x6F,0x78 ,0x20,0x5B,0x30,0x20 ,0x30,0x20
};//MediaBox [0 0 ...


const char BTETlength2char[318] = {
   0x20, '3', '0' ,
   0x5D,0x0A,0x20,0x20 ,0x3E,0x3E,0x0A,0x65 ,0x6E,0x64,0x6F,0x62 ,0x6A,0x0A,0x0A,0x33 ,
   0x20,0x30,0x20,0x6F ,0x62,0x6A,0x0A,0x20 ,0x20,0x3C,0x3C,0x20 ,0x20,0x2F,0x54,0x79 ,
   0x70,0x65,0x20,0x2F ,0x50,0x61,0x67,0x65 ,0x0A,0x20,0x20,0x20 ,0x20,0x20,0x20,0x2F ,
   0x50,0x61,0x72,0x65 ,0x6E,0x74,0x20,0x32 ,0x20,0x30,0x20,0x52 ,0x0A,0x20,0x20,0x20 ,
   0x20,0x20,0x20,0x2F ,0x52,0x65,0x73,0x6F ,0x75,0x72,0x63,0x65 ,0x73,0x0A,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x3C,0x3C,0x20 ,0x2F,0x46,0x6F,0x6E ,0x74,0x0A,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x3C,0x3C,0x20 ,0x2F,0x46,0x31,0x0A ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x3C ,
   0x3C,0x20,0x2F,0x54 ,0x79,0x70,0x65,0x20 ,0x2F,0x46,0x6F,0x6E ,0x74,0x0A,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,
   0x2F,0x53,0x75,0x62 ,0x74,0x79,0x70,0x65 ,0x20,0x2F,0x54,0x79 ,0x70,0x65,0x31,0x0A ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,
   0x20,0x20,0x2F,0x42 ,0x61,0x73,0x65,0x46 ,0x6F,0x6E,0x74,0x20 ,0x2F,0x54,0x69,0x6D ,
   0x65,0x73,0x2D,0x52 ,0x6F,0x6D,0x61,0x6E ,0x0A,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,0x3E,0x3E,0x0A,0x20 ,0x20,0x20,0x20,0x20 ,
   0x20,0x20,0x20,0x20 ,0x20,0x20,0x3E,0x3E ,0x0A,0x20,0x20,0x20 ,0x20,0x20,0x20,0x20 ,
   0x3E,0x3E,0x0A,0x20 ,0x20,0x20,0x20,0x20 ,0x20,0x2F,0x43,0x6F ,0x6E,0x74,0x65,0x6E ,
   0x74,0x73,0x20,0x34 ,0x20,0x30,0x20,0x52 ,0x0A,0x20,0x20,0x3E ,0x3E,0x0A,0x65,0x6E ,
   0x64,0x6F,0x62,0x6A ,0x0A,0x0A,0x34,0x20 ,0x30,0x20,0x6F,0x62 ,0x6A,0x0A,0x20,0x20 ,
   0x3C,0x3C,0x20,0x2F ,0x4C,0x65,0x6E,0x67 ,0x74,0x68,0x20
};// << /Length ..
   

// >>
const char title[34] = {
   0x20,0x3E,0x3E,0x0A ,0x73,0x74,0x72,0x65 ,0x61,0x6D,0x0A,0x42 ,0x54,0x0A,0x2F,0x46 ,
   0x31,0x20,0x31,0x38 ,0x20,0x54,0x66,0x0A , '1', '0',0x20, '1' , '0',0x20,0x54,0x64 ,
   0x0A ,0x28
};//(.*

// 'n', 'i', 'n' , 'g', 'u', 'n',0x20 , 'd', 'o', 'c', 'u' , 'm', 'e', 'n', 't' , 'o',0x20, 'p', 'd' ,  'f',

//)
const char xref3char[192] = {
        0x29,0x20,0x54 ,0x6A,0x0A,0x20,0x20 ,0x45,0x54,0x0A,0x65 ,0x6E,0x64,0x73,0x74 ,
   0x72,0x65,0x61,0x6D ,0x0A,0x65,0x6E,0x64 ,0x6F,0x62,0x6A,0x0A ,0x0A,0x78,0x72,0x65 ,
   0x66,0x0A,0x30,0x20 ,0x35,0x0A,0x30,0x30 ,0x30,0x30,0x30,0x30 ,0x30,0x30,0x30,0x30 ,
   0x20,0x36,0x35,0x35 ,0x33,0x35,0x20,0x66 ,0x20,0x0A,0x30,0x30 ,0x30,0x30,0x30,0x30 ,
   0x30,0x30,0x31,0x38 ,0x20,0x30,0x30,0x30 ,0x30,0x30,0x20,0x6E ,0x20,0x0A,0x30,0x30 ,
   0x30,0x30,0x30,0x30 ,0x30,0x30,0x37,0x37 ,0x20,0x30,0x30,0x30 ,0x30,0x30,0x20,0x6E ,
   0x20,0x0A,0x30,0x30 ,0x30,0x30,0x30,0x30 ,0x30,0x31,0x37,0x38 ,0x20,0x30,0x30,0x30 ,
   0x30,0x30,0x20,0x6E ,0x20,0x0A,0x30,0x30 ,0x30,0x30,0x30,0x30 ,0x30,0x34,0x35,0x37 ,
   0x20,0x30,0x30,0x30 ,0x30,0x30,0x20,0x6E ,0x20,0x0A,0x74,0x72 ,0x61,0x69,0x6C,0x65 ,
   0x72,0x0A,0x20,0x20 ,0x3C,0x3C,0x20,0x20 ,0x2F,0x52,0x6F,0x6F ,0x74,0x20,0x31,0x20 ,
   0x30,0x20,0x52,0x0A ,0x20,0x20,0x20,0x20 ,0x20,0x20,0x2F,0x53 ,0x69,0x7A,0x65,0x20 ,
   0x35,0x0A,0x20,0x20 ,0x3E,0x3E,0x0A,0x73 ,0x74,0x61,0x72,0x74 ,0x78,0x72,0x65,0x66 ,
   0x0A
};//startxref ...

   
const char epilog[6] = {
   0x0A,0x25,0x25,0x45 ,0x4F,0x46
};


void copypdfplaceholder(const char *s, char *o, int *oo)
{
   int ss=(int)strlen(s);
   if ((ss<4)||(ss>56))//99-43
   {
      *oo=746;
      memcpy(o, &ningundocumentopdf, 746ul);
      return;
   }
   else
   {
      *oo=154+3+318+2+34+ss+192+3+6;
      memcpy(o, &width3char, 154);
      sprintf(o+154,"%u",(ss*20)+20);
      memcpy(o+157, &BTETlength2char, 318);
      sprintf(o+475,"%u",ss+43);
      memcpy(o+477, &title, 34);
      memcpy(o+511, s, ss);
      memcpy(o+511+ss, &xref3char, 192);
      sprintf(o+703+ss,"%u",511+ss+28);
      memcpy(o+706+ss, &epilog, 6);
   }
}
